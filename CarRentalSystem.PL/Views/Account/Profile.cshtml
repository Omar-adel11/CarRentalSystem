@model ProfileDTO
@{
    Layout = "_Layout";
    ViewData["Title"] = "Personal Info";
}

<style>
    
    body {
        background-color: #121212;
        color: #e0e0e0;
        font-family: Arial, sans-serif;
    }

    .profile-container {
        display: flex;
        gap: 20px;
        padding: 40px;
        max-width: 1200px;
        margin: auto;
    }

    /* === Left Sidebar Styles === */
    .profile-sidebar {
        background-color: #1f1f1f;
        border: 1px solid #333;
        border-radius: 15px;
        padding: 30px;
        flex: 0 0 280px;
        text-align: center;
        align-self: flex-start; /* Keeps sidebar from stretching */
    }

    .profile-picture-container {
        position: relative;
        width: 150px;
        height: 150px;
        margin: 0 auto 20px auto;
    }

    .profile-picture {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        object-fit: cover;
        border: 3px solid #333;
    }

    .edit-icon {
        position: absolute;
        bottom: 5px;
        right: 5px;
        background-color: #e0e0e0;
        color: #121212;
        border-radius: 50%;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        cursor: pointer;
        border: 2px solid #1f1f1f;
    }

    .profile-username {
        font-size: 1.5em;
        font-weight: bold;
        margin-bottom: 40px;
    }

    .profile-nav ul {
        list-style: none;
        padding: 0;
        text-align: left;
    }

    .profile-nav li a {
        display: block;
        color: #e0e0e0;
        text-decoration: none;
        padding: 15px 20px;
        border-radius: 10px;
        margin-bottom: 10px;
        transition: background-color 0.2s;
    }

        .profile-nav li a.active, .profile-nav li a:hover {
            background-color: #2a2a2a;
            color: #4CAF50;
            font-weight: bold;
        }

    /* === Right Content Area & Form Styles === */
    .profile-content {
        background-color: #1f1f1f;
        border: 1px solid #333;
        border-radius: 15px;
        padding: 40px;
        flex-grow: 1;
    }

    .form-header {
        font-size: 2.5em;
        font-weight: bold;
        margin-bottom: 30px;
    }

        .form-header .p-prefix {
            color: #4CAF50;
        }

    .form-group label, .form-check-label {
        color: #b0b0b0;
        margin-bottom: 5px;
        font-size: 0.9em;
    }

    .form-control {
        background-color: #2b2b2b;
        border: 1px solid #444;
        color: #e0e0e0;
    }

        .form-control:focus {
            background-color: #2b2b2b;
            border-color: #4CAF50;
            box-shadow: 0 0 0 0.2rem rgba(76, 175, 80, 0.25);
            color: #e0e0e0;
        }

    .btn-primary {
        background-color: #4CAF50;
        border-color: #4CAF50;
        padding: 10px 30px;
    }

    .form-check-input:checked {
        background-color: #4CAF50;
        border-color: #4CAF50;
    }

    .edit-icon-button {
        background-color: #333;
        color: #e0e0e0;
        border: 1px solid #555;
        border-radius: 8px;
        padding: 8px 15px;
        cursor: pointer;
        display: inline-block;
        margin-top: -10px;
        margin-bottom: 25px;
        transition: background-color 0.2s;
    }

        .edit-icon-button:hover {
            background-color: #444;
        }
</style>

<div class="profile-container">
    <aside class="profile-sidebar">
        <div class="profile-picture-container">
            @if (!string.IsNullOrEmpty(Model.PictureURL))
            {
                <img src="~/files/UsersImages/@Model.PictureURL"  alt="Profile Picture" class="profile-picture" />
            }
            else
            {
                <img src="~/images/default-avatar.png" alt="Profile Picture" class="profile-picture" />
            }
        </div>

        <label for="profileImageInput" class="edit-icon-button">
            ✎ Edit Picture
        </label>

        <h2 class="profile-username">@Model.Username</h2>
        <nav class="profile-nav">
            <ul>
                <li><a class="active" asp-controller="Account" asp-action="Profile">Personal Info</a></li>
                <li><a asp-controller="Account" asp-action="MyBookings">My Bookings</a></li>
                <li><a asp-controller="Account" asp-action="SavedCars">Saved Cars</a></li>
                <li><a asp-controller="Account" asp-action="Settings">Settings</a></li>
            </ul>
        </nav>
    </aside>

    <main class="profile-content">
        <header class="form-header">
            <span class="p-prefix">P</span>ersonal Info
        </header>

        <form asp-action="UpdatePersonalInfo" enctype="multipart/form-data">
            <input type="hidden" asp-for="PictureURL" />

            <div class="form-group mb-3">
                <label>Gender</label>
                <div class="d-flex">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" asp-for="Gender" id="genderMale" value="Male">
                        <label class="form-check-label" for="genderMale">Male</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" asp-for="Gender" id="genderFemale" value="Female">
                        <label class="form-check-label" for="genderFemale">Female</label>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 form-group mb-3">
                    <label asp-for="Username"></label>
                    <input asp-for="Username" class="form-control" />
                    <span asp-validation-for="Username" class="text-danger"></span>
                </div>
                <div class="col-md-4 form-group mb-3">
                    <label asp-for="FirstName"></label>
                    <input asp-for="FirstName" class="form-control" />
                    <span asp-validation-for="FirstName" class="text-danger"></span>
                </div>
                <div class="col-md-4 form-group mb-3">
                    <label asp-for="LastName"></label>
                    <input asp-for="LastName" class="form-control" />
                    <span asp-validation-for="LastName" class="text-danger"></span>
                </div>
            </div>

            <div class="form-group mb-3">
                <label asp-for="Email"></label>
                <input asp-for="Email" class="form-control" />
                <span asp-validation-for="Email" class="text-danger"></span>
            </div>

            <div class="form-group mb-3">
                <label asp-for="Address"></label>
                <input asp-for="Address" class="form-control" />
                <span asp-validation-for="Address" class="text-danger"></span>
            </div>

            <div class="row">
                <div class="col-md-6 form-group mb-3">
                    <label asp-for="PhoneNumber"></label>
                    <input asp-for="PhoneNumber" class="form-control" />
                    <span asp-validation-for="PhoneNumber" class="text-danger"></span>
                </div>
                <div class="col-md-6 form-group mb-3">
                    <label asp-for="DateOfBirth"></label>
                    <input asp-for="DateOfBirth" class="form-control" type="date" />
                    <span asp-validation-for="DateOfBirth" class="text-danger"></span>
                </div>
            </div>

            <div class="form-group mb-4">
                <label asp-for="CreditCardNumber"></label>
                <input asp-for="CreditCardNumber" class="form-control" />
                <span asp-validation-for="CreditCardNumber" class="text-danger"></span>
            </div>

            <input asp-for="Image" type="file" class="form-control d-none" id="profileImageInput" />

            <div class="form-group d-flex gap-3 align-items-center">
                <button type="submit" class="btn btn-primary">Save Changes</button>
                <a asp-controller="Account" asp-action="SignOut" class="btn btn-outline-secondary">Sign Out</a>
            </div>
        </form>
    </main>
</div>